# 调度
> schedule



- 程序
    - 进程
        - 线程
            - 协程

---
- 单线程
- 多线程

- 并行执行
    - 多处理器，同一时刻
- 并发执行
    - 单处理器，同一时间

- 进程同步
- 进程互斥

- 申请资源
- 释放资源

---
## 死锁

- 同步中嵌套同步,导致锁无法释放
- 自己拥有的资源正是对方需要的资源

### 产生死锁的四个必要条件

- 互斥：加锁保证某个资源只能被一个线程使用
- 请求与保持：
- 不可抢占：
- 循环等待：

## 预防死锁的方法：破坏产生死锁的必要条件
- 互斥条件不可被破坏
- 一次性申请所有资源
- 如果在申请多个资源过程中时无法全部申请到，就将已申请的资源释放
- 按顺序申请资源
---

## 同步模式
- 犹豫(Balking)模式用在一个线程发现另一个线程或本线程已经做了某一件相同的事，那么本线程就无需再做了，直接结束返回

- 保护性暂停(Guarded Suspension)模式用在一个线程等待另一个线程的执行结果，当条件不满足时线程等待。
- `Thread.join()`实现
- `Future`实现

---

- 异步模式之生产者和消费者

- 异步模式之工作线程
让有限的工作线程（Worker Thread）来轮流异步处理无限多的任务。
- 线程池实现
- 体现享元模式

- 终止模式之两阶段终止模式(Two Phase Termination)

- Thread-Per-Message模式




